<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TMDB</title>

    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/signUp.css" />
    <link rel="stylesheet" href="./css/search.css" />
  </head>
  <body>
    <div id="app">
      <!-- ================ START MENU ================ -->
      <div class="header">
        <nav>
          <div class="navigationBar">
            <a href="/" class="nav-logo">
              <img src="images/logo.svg" alt="logo" width="154" height="20" />
            </a>

            <div class="nav-list-container">
              <ul>
                <li class="nav-list-container--item">
                  <a href="/">Movies</a>
                  <div class="menu-group">
                    <a class="menu-group--link" href="./movies.html">Popular</a>
                    <a class="menu-group--link" href="#">Now Playing</a>
                    <a class="menu-group--link" href="#">Upcoming</a>
                    <a class="menu-group--link" href="#">Top Rated</a>
                  </div>
                </li>

                <li class="nav-list-container--item">
                  <a href="/">TV Shows</a>
                  <div class="menu-group">
                    <a class="menu-group--link" href="./tvShow.html">Popular</a>
                    <a class="menu-group--link" href="#">Airing Today</a>
                    <a class="menu-group--link" href="#">On TV</a>
                    <a class="menu-group--link" href="#">Top Rated</a>
                  </div>
                </li>

                <li class="nav-list-container--item">
                  <a href="/">People</a>
                  <div class="menu-group">
                    <a class="menu-group--link" href="./people.html">Popular</a>
                  </div>
                </li>

                <li class="nav-list-container--item">
                  <a href="/">More</a>
                  <div class="menu-group">
                    <a class="menu-group--link" href="./movies.html">Popular</a>
                    <a class="menu-group--link" href="./movies.html"
                      >Airing Today</a
                    >
                    <a class="menu-group--link" href="./movies.html">On TV</a>
                    <a class="menu-group--link" href="./movies.html"
                      >Top Rated</a
                    >
                  </div>
                </li>
              </ul>

              <ul>
                <li>
                  <a href="/">
                    <i class="menu-icons">
                      <img src="images/plus.svg" alt="" />
                    </i>
                  </a>
                </li>

                <li>
                  <a href="/">
                    <div class="box-visible">EN</div>
                  </a>
                </li>

                <li id="noti">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="noti-icon"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"
                    />
                  </svg>
                  <span>1</span>
                </li>

                <li id="info">
                  <a href="/" class="info-name">N</a>
                </li>
                <li id="signIn">
                  <a href="./signIn.html">Login</a>
                </li>

                <li id="signUp">
                  <a href="./signUp.html">Join TMDB</a>
                </li>

                <li>
                  <a href="/">
                    <i class="menu-icons search">
                      <img src="./images/search.svg" alt="" />
                    </i>
                  </a>
                </li>
                <li>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    id="signOut"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"
                    />
                  </svg>
                </li>
              </ul>
            </div>
          </div>
        </nav>

        <!-- === menu mobile ===  -->
        <div class="mobile-header">
          <span class="mobile-header--icon menu">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="w-6 h-6"
            >
              <path
                fill-rule="evenodd"
                d="M3 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 5.25zm0 4.5A.75.75 0 013.75 9h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 9.75zm0 4.5a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75zm0 4.5a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z"
                clip-rule="evenodd"
              />
            </svg>
          </span>
          <a href="/index.html" class="mobile-header--logo">
            <img src="./images/logoFooter.svg" alt="" />
          </a>
          <div class="mobile-header--right">
            <span class="mobile-header--icon user">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="w-6 h-6"
              >
                <path
                  fill-rule="evenodd"
                  d="M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z"
                  clip-rule="evenodd"
                />
              </svg>
            </span>
            <img
              class="mobile-header--icon search"
              src="./images/search.svg"
              alt=""
            />
          </div>
        </div>
      </div>
      <!-- =================== END MENU ============  -->

      <!-- ============= START CONTENT =========== -->
      <div class="content-form">

      <div class="search-form">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="search-icon">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
          </svg>
          <input type="text" id="searchInputTop" placeholder="Search for a movie, tv show, person...">
      </div>
    </div>

      <div class="content">
        <div class="content-left">
          <h3>Search Results</h3>
          <ul class="list-feature">
            <li class="feature-item">
              <span> TV Show </span>
              <p>5</p>
            </li>
            <li class="feature-item">
              <span> People </span>
              <p>5</p>
            </li>

            <li class="feature-item">
              <span> Movies </span>
              <p>15</p>
            </li>
            <li class="feature-item">
              <span> Keywords </span>
              <p>1</p>
            </li>
            <li class="feature-item">
              <span> Companies </span>
              <p>3</p>
            </li>
            <li class="feature-item">
              <span> Collections </span>
              <p>0</p>
            </li>
            <li class="feature-item">
              <span> Networks </span>
              <p>0</p>
            </li>
          </ul>
        </div>
        <div class="content-right" id="content-right">
          
        </div>
      </div>

      <!-- ============= END CONTENT =========== -->

      <!-- ============= START FOOTER =========== -->

      <footer class="footer">
        <div class="footer-nav">
          <div class="join-community">
            <img src="./images/logoFooter.svg" alt="footer-logo" />
            <a class="footer-btn" href="#!"> JOIN THE COMMUNITY </a>
          </div>
          <div class="footer-column">
            <h5 class="footer-column--heading">THE BASICS</h5>
            <ul class="footer-column--title">
              <li>
                <a class="" href="#!"> Gi·ªõi thi·ªáu v·ªÅ TMDB </a>
              </li>
              <li>
                <a class="" href="#!"> Contact Us </a>
              </li>
              <li>
                <a class="" href="#!"> Support Forums </a>
              </li>
              <li>
                <a class="" href="#!"> API </a>
              </li>
              <li>
                <a class="" href="#!"> System Status </a>
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h5 class="footer-column--heading">GET INVOLVED</h5>
            <ul class="footer-column--title">
              <li>
                <a class="" href="#!"> Contribution Bible </a>
              </li>
              <li>
                <a class="" href="#!"> Add New Movie </a>
              </li>
              <li>
                <a class="" href="#!"> Add New TV Show </a>
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h5 class="footer-column--heading">COMMUNITY</h5>
            <ul class="footer-column--title">
              <li>
                <a class="" href="#!"> Guidelines </a>
              </li>
              <li>
                <a class="" href="#!"> Discussions </a>
              </li>
              <li>
                <a class="" href="#!"> Leaderboard </a>
              </li>
              <li>
                <a class="" href="#!"> Twitter </a>
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h5 class="footer-column--heading">LEGAL</h5>
            <ul class="footer-column--title">
              <li>
                <a class="" href="#!"> Terms of Use </a>
              </li>
              <li>
                <a class="" href="#!"> API Terms of Use </a>
              </li>
              <li>
                <a class="" href="#!"> Privacy Policy </a>
              </li>
              <li>
                <a class="" href="#!"> DMCA Takedown Request </a>
              </li>
            </ul>
          </div>
        </div>
      </footer>

      <!-- ============= END FOOTER =========== -->
    </div>
    <div class="menu-rp" id="menu-rp">
      <div class="menu-rp-item">
        <p class="menu-rp-item--title">Movie</p>
        <a href="/movies.html" class="menu-rp-item--link">Popular</a>
        <a href="#" class="menu-rp-item--link">Top Rated</a>
        <a href="#" class="menu-rp-item--link">Upcoming</a>
        <a href="#" class="menu-rp-item--link">Now Playing</a>
      </div>

      <div class="menu-rp-item">
        <p class="menu-rp-item--title">TV Shows</p>
        <a href="/tvShow.html" class="menu-rp-item--link">Popular</a>
        <a href="#" class="menu-rp-item--link">Top Rated</a>
        <a href="#" class="menu-rp-item--link">Upcoming</a>
        <a href="#" class="menu-rp-item--link">Now Playing</a>
      </div>
      <div class="menu-rp-item">
        <p class="menu-rp-item--title">People</p>
        <a href="/people.html" class="menu-rp-item--link">Popular people</a>
      </div>
    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.5.1/axios.min.js"
      integrity="sha512-emSwuKiMyYedRwflbZB2ghzX8Cw8fmNVgZ6yQNNXXagFzFOaQmbvQ1vmDkddHjm5AITcBIZfC7k4ShQSjgPAmQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <!-- <script src="./main.js" type="module"></script> -->
    <script type="module">
// L·∫•y gi√° tr·ªã c·ªßa query parameter t·ª´ URL
const queryString = window.location.search;
const urlParams = new URLSearchParams(queryString);
const keyword = urlParams.get("query");

// L·∫•y ƒë·ªëi t∆∞·ª£ng √¥ input t·ª´ DOM
const searchInputTop = document.getElementById("searchInputTop");

searchInputTop.addEventListener("keyup", function(event) {
  // Ki·ªÉm tra xem ph√≠m ƒë√£ ƒë∆∞·ª£c nh·∫•n c√≥ ph·∫£i l√† "Enter" kh√¥ng (m√£ ph√≠m 13)
  if (event.keyCode === 13) {
    // L·∫•y gi√° tr·ªã t·ª´ √¥ input
    const keyword = searchInputTop.value;
  const encodedQuery = encodeURIComponent(keyword).replace(/%20/g, '+');
  // Ki·ªÉm tra xem t·ª´ kh√≥a c√≥ ƒë∆∞·ª£c nh·∫≠p kh√¥ng
  if (keyword) {
    // Chuy·ªÉn h∆∞·ªõng trang v·ªõi query parameter
    window.location.href = `search.html?query=${encodedQuery}`;
  } else {
    // N·∫øu kh√¥ng c√≥ t·ª´ kh√≥a, x·ª≠ l√Ω t√πy thu·ªôc v√†o y√™u c·∫ßu c·ªßa b·∫°n
    // V√≠ d·ª•: Hi·ªÉn th·ªã th√¥ng b√°o l·ªói ho·∫∑c kh√¥ng th·ª±c hi·ªán chuy·ªÉn h∆∞·ªõng
    alert("Vui l√≤ng nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm.");
  }
  }
});

// G√°n gi√° tr·ªã t·ª´ query parameter v√†o √¥ input
if (keyword) {
  // Ki·ªÉm tra xem keyword c√≥ gi√° tr·ªã kh√¥ng tr∆∞·ªõc khi g√°n
  searchInputTop.value = decodeURIComponent(keyword); // Decode ƒë·ªÉ hi·ªÉn th·ªã k√Ω t·ª± ƒë·∫∑c bi·ªát n·∫øu c√≥
  const options = {
  method: 'GET',
  headers: {
    accept: 'application/json',
    Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlZjEzOGQyZTQzOGY0OGMwOTEwZTY4MDZmNWIwZmNlMSIsInN1YiI6IjYzMmM3NWQwNmNhOWEwMDA3ZDdmZmFkNiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.uvH3T6N3mioUVosg034b69t7JljiPwrcj_EHU19cQgA'
  }
};

fetch(`https://api.themoviedb.org/3/search/movie?api_key=ef138d2e438f48c0910e6806f5b0fce1&query=${keyword}`, options)
  .then(response => response.json())
  .then(response => {
  const listProduct = response.results;
 

          const productTemplates = listProduct
            .map(
              (item) =>
                `   <a href="" class="search-item">
            <img
            src=${item?.poster_path ? `http://image.tmdb.org/t/p/w500/${item?.poster_path}` : 'https://media.istockphoto.com/id/1413239688/photo/update.webp?b=1&s=170667a&w=0&k=20&c=CI5rIOHXUsmYyIPYT3zPp6zh5B_d_oHBskgWHNxG8Z0='}
            alt=""
            />

            <div class="search-item-info">
             <div>
                <h4 class="search-item-info--name">${item?.name || item?.title}</h4>
                <span class="search-item-info--time">${
              item?.first_air_date || item?.release_date
            }</span>
             </div>
              <p class="search-item-info--des">
                ${item?.overview}
              </p>
            </div>
          </a>`
            )
            .join("");
          const container = document.getElementById("content-right");
          console.log("üöÄ ~ file: search.html:376 ~ container:", container)
          container.innerHTML = productTemplates;
        }
  )
  .catch(err => console.error(err));
} else {
  // N·∫øu kh√¥ng c√≥ keyword, x·ª≠ l√Ω t√πy thu·ªôc v√†o y√™u c·∫ßu c·ªßa b·∫°n
  // V√≠ d·ª•: Hi·ªÉn th·ªã th√¥ng b√°o ho·∫∑c kh√¥ng th·ª±c hi·ªán h√†nh ƒë·ªông g√¨ c·∫£
  alert("Kh√¥ng c√≥ t·ª´ kh√≥a t√¨m ki·∫øm ƒë∆∞·ª£c truy·ªÅn.");
}

    </script>
  </body>
</html>
