<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TMDB</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css"
    />
    <script
      src="https://code.jquery.com/jquery-2.2.4.min.js"
      integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
      crossorigin="anonymous"
    ></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/signUp.css" />
  </head>
  <body>
    <div id="app">
      <!-- ================ START MENU ================ -->
      <div class="header">
        <nav>
          <div class="navigationBar">
            <a href="/" class="nav-logo">
              <img src="images/logo.svg" alt="logo" width="154" height="20" />
            </a>

            <div class="nav-list-container">
              <ul>
                <li class="nav-list-container--item">
                  <a href="/">Movies</a>
                  <div class="menu-group">
                    <a class="menu-group--link" href="./movies.html">Popular</a>
                    <a class="menu-group--link" href="#">Now Playing</a>
                    <a class="menu-group--link" href="#">Upcoming</a>
                    <a class="menu-group--link" href="#">Top Rated</a>
                  </div>
                </li>

                <li class="nav-list-container--item">
                  <a href="/">TV Shows</a>
                  <div class="menu-group">
                    <a class="menu-group--link" href="./tvShow.html">Popular</a>
                    <a class="menu-group--link" href="#">Airing Today</a>
                    <a class="menu-group--link" href="#">On TV</a>
                    <a class="menu-group--link" href="#">Top Rated</a>
                  </div>
                </li>

                <li class="nav-list-container--item">
                  <a href="/">People</a>
                  <div class="menu-group">
                    <a class="menu-group--link" href="./people.html">Popular</a>
                  </div>
                </li>

                <li class="nav-list-container--item">
                  <a href="/">More</a>
                  <div class="menu-group">
                    <a class="menu-group--link" href="./movies.html">Popular</a>
                    <a class="menu-group--link" href="./movies.html"
                      >Airing Today</a
                    >
                    <a class="menu-group--link" href="./movies.html">On TV</a>
                    <a class="menu-group--link" href="./movies.html"
                      >Top Rated</a
                    >
                  </div>
                </li>
              </ul>

              <ul>
                <li>
                  <a href="/">
                    <i class="menu-icons">
                      <img src="images/plus.svg" alt="" />
                    </i>
                  </a>
                </li>

                <li>
                  <a href="/">
                    <div class="box-visible">EN</div>
                  </a>
                </li>

                <li id="noti">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="noti-icon"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"
                    />
                  </svg>
                  <span>1</span>
                </li>

                <li id="info">
                  <a href="/" class="info-name">N</a>
                </li>
                <li id="signIn">
                  <a href="./signIn.html">Login</a>
                </li>

                <li id="signUp">
                  <a href="./signUp.html">Join TMDB</a>
                </li>

                <li>
                  <a href="/">
                    <i class="menu-icons search">
                      <img src="./images/search.svg" alt="" />
                    </i>
                  </a>
                </li>
                <li>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    id="signOut"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"
                    />
                  </svg>
                </li>
              </ul>
            </div>
          </div>
        </nav>

        <!-- === menu mobile ===  -->
        <div class="mobile-header">
          <span class="mobile-header--icon menu">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="w-6 h-6"
            >
              <path
                fill-rule="evenodd"
                d="M3 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 5.25zm0 4.5A.75.75 0 013.75 9h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 9.75zm0 4.5a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75zm0 4.5a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z"
                clip-rule="evenodd"
              />
            </svg>
          </span>
          <a href="/index.html" class="mobile-header--logo">
            <img src="./images/logoFooter.svg" alt="" />
          </a>
          <div class="mobile-header--right">
            <span class="mobile-header--icon user">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="w-6 h-6"
              >
                <path
                  fill-rule="evenodd"
                  d="M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z"
                  clip-rule="evenodd"
                />
              </svg>
            </span>
            <img
              class="mobile-header--icon search"
              src="./images/search.svg"
              alt=""
            />
          </div>
        </div>
      </div>
      <!-- =================== END MENU ============  -->

      <!-- ============= START CONTENT =========== -->
      <div class="content">
        <div class="content-left">
          <h3>Benefits of being a member</h3>
          <ul class="list-feature">
            <li class="feature-item">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="feature-item--icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                />
              </svg>

              Find something to watch on your subscribed streaming services
            </li>
            <li class="feature-item">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="feature-item--icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                />
              </svg>

              Log the movies and TV shows you have watched
            </li>
            <li class="feature-item">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="feature-item--icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                />
              </svg>

              Keep track of your favourite movies and TV shows and get
              recommendations from them
            </li>
            <li class="feature-item">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="feature-item--icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                />
              </svg>

              Build and maintain a personal watchlist
            </li>
            <li class="feature-item">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="feature-item--icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                />
              </svg>

              Build custom mixed lists (movies and TV)
            </li>
            <li class="feature-item">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="feature-item--icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                />
              </svg>

              Take part in movie and TV discussions
            </li>
            <li class="feature-item">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="feature-item--icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                />
              </svg>

              Contribute to, and improve the information in our database
            </li>
          </ul>
        </div>
        <div class="content-right">
          <h2 class="content-right--heading">Sign up for an account</h2>
          <p class="content-right--des">
            Signing up for an account is free and easy. Fill out the form below
            to get started. JavaScript is required to to continue.
          </p>
          <div>
            <form id="signUpForm">
              <div class="form-field">
                <p>Username</p>
                <input type="text" id="username" />
              </div>
              <div class="form-field">
                <p>Email</p>
                <input type="email" id="email" />
              </div>
              <div class="form-field">
                <p>Password</p>
                <input type="password" id="password" />
              </div>

              <p class="form-des">
                By clicking the "Sign up" button below, I certify that I have
                read and agree to the TMDB terms of use and privacy policy.
                Cancel
              </p>

              <button type="submit">Sign Up</button>
              <a href="" class="cancel">Cancel</a>
            </form>
          </div>
        </div>
      </div>

      <!-- ============= END CONTENT =========== -->

      <!-- ============= START FOOTER =========== -->

      <footer class="footer">
        <div class="footer-nav">
          <div class="join-community">
            <img src="./images/logoFooter.svg" alt="footer-logo" />
            <a class="footer-btn" href="#!"> JOIN THE COMMUNITY </a>
          </div>
          <div class="footer-column">
            <h5 class="footer-column--heading">THE BASICS</h5>
            <ul class="footer-column--title">
              <li>
                <a class="" href="#!"> Giới thiệu về TMDB </a>
              </li>
              <li>
                <a class="" href="#!"> Contact Us </a>
              </li>
              <li>
                <a class="" href="#!"> Support Forums </a>
              </li>
              <li>
                <a class="" href="#!"> API </a>
              </li>
              <li>
                <a class="" href="#!"> System Status </a>
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h5 class="footer-column--heading">GET INVOLVED</h5>
            <ul class="footer-column--title">
              <li>
                <a class="" href="#!"> Contribution Bible </a>
              </li>
              <li>
                <a class="" href="#!"> Add New Movie </a>
              </li>
              <li>
                <a class="" href="#!"> Add New TV Show </a>
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h5 class="footer-column--heading">COMMUNITY</h5>
            <ul class="footer-column--title">
              <li>
                <a class="" href="#!"> Guidelines </a>
              </li>
              <li>
                <a class="" href="#!"> Discussions </a>
              </li>
              <li>
                <a class="" href="#!"> Leaderboard </a>
              </li>
              <li>
                <a class="" href="#!"> Twitter </a>
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h5 class="footer-column--heading">LEGAL</h5>
            <ul class="footer-column--title">
              <li>
                <a class="" href="#!"> Terms of Use </a>
              </li>
              <li>
                <a class="" href="#!"> API Terms of Use </a>
              </li>
              <li>
                <a class="" href="#!"> Privacy Policy </a>
              </li>
              <li>
                <a class="" href="#!"> DMCA Takedown Request </a>
              </li>
            </ul>
          </div>
        </div>
      </footer>

      <!-- ============= END FOOTER =========== -->
    </div>
    <div class="menu-rp" id="menu-rp">
      <div class="menu-rp-item">
        <p class="menu-rp-item--title">Movie</p>
        <a href="/movies.html" class="menu-rp-item--link">Popular</a>
        <a href="#" class="menu-rp-item--link">Top Rated</a>
        <a href="#" class="menu-rp-item--link">Upcoming</a>
        <a href="#" class="menu-rp-item--link">Now Playing</a>
      </div>

      <div class="menu-rp-item">
        <p class="menu-rp-item--title">TV Shows</p>
        <a href="/tvShow.html" class="menu-rp-item--link">Popular</a>
        <a href="#" class="menu-rp-item--link">Top Rated</a>
        <a href="#" class="menu-rp-item--link">Upcoming</a>
        <a href="#" class="menu-rp-item--link">Now Playing</a>
      </div>
      <div class="menu-rp-item">
        <p class="menu-rp-item--title">People</p>
        <a href="/people.html" class="menu-rp-item--link">Popular people</a>
      </div>
    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.5.1/axios.min.js"
      integrity="sha512-emSwuKiMyYedRwflbZB2ghzX8Cw8fmNVgZ6yQNNXXagFzFOaQmbvQ1vmDkddHjm5AITcBIZfC7k4ShQSjgPAmQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script type="module">
      import {
        auth,
        createUserWithEmailAndPassword,
        db,
        doc,
        serverTimestamp,
        addDoc,
        collection,
      } from "./fireBaseConfig.js";

      // Lấy đối tượng form và các trường input
      const signUpForm = document.getElementById("signUpForm");

      const usernameInput = document.getElementById("username");
      const emailInput = document.getElementById("email");
      const passwordInput = document.getElementById("password");

      // Gán sự kiện submit cho form
      signUpForm.addEventListener("submit", function (e) {
        e.preventDefault(); // Ngừng chuyển hướng trang sau khi nhấn nút submit

        // Lấy giá trị từ các trường input
        const username = usernameInput.value;
        const email = emailInput.value;
        const password = passwordInput.value;

        // Kiểm tra nếu các trường input không được điền
        if (!username || !email || !password) {
          toastr.options = {
            positionClass: "toast-bottom-right",
          };
          toastr.warning("Please fill out all fields.");
          return; // Ngừng xử lý tiếp theo nếu có trường input trống
        }

        createUserWithEmailAndPassword(auth, email, password)
          .then((userCredential) => {
            
            // Đăng ký thành công
            const user = userCredential.user;
            console.log("🚀 ~ file: signUp.html:512 ~ .then ~ user:", user)
            async function handleAddUser(user) {
              try {
                const docRef = await addDoc(collection(db, "users"), {
                  email: user.email,
                  displayName: username,
                  creationTime: user.metadata.creationTime,
                  role: "user",
                  status: "active",
                });
                console.log("Document written with ID: ", docRef.id);
                alert("Đăng kí thành công");
                window.location.assign("./index.html");
              } catch (e) {
                console.error("Error adding document: ", e);
              }
            }
            handleAddUser(user);
          
          })
          .catch((error) => {
            // Đăng ký thất bại
            if (error.code === "auth/email-already-in-use") {
              // Hiển thị thông báo lỗi cho người dùng
              toastr.options = {
                positionClass: "toast-bottom-right",
              };
              toastr.error("Email already in use");
              return;
            } else {
              // Xử lý các lỗi khác
              toastr.options = {
                positionClass: "toast-bottom-left",
              };
              toastr.error(error);
            }
          });
      });
    
    
    
    </script>
    <script src="./main.js" type="module"></script>
  </body>
</html>
